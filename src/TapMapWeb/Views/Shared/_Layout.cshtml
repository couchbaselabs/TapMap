@{ Func<bool> isLoggedIn = () => SessionUser.Current.IsInRole(TapMapWeb.Constants.RoleConstants.ACTIVE_USERS); }

<!DOCTYPE html>
<html>
<head>
	<title>@ViewBag.Title</title>
	<link href="@Url.Content("~/Content/Styles/Grid.css")" rel="stylesheet" type="text/css" />
	<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
	<link href="@Url.Content("~/Content/themes/base/jquery.ui.autocomplete.css")" rel="stylesheet" type="text/css" />
	
	<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
</head>
<body>
	<header id="main-nav" style="width:100%;">
		<div class="container_12">
			@Html.ActionLink("Home", "Index", "Home")
			<a href="/">@@Drink</a>
			<a href="/" style="margin-right:350px;">#Discover</a>
			<a href="/">Search</a>


			@if (! isLoggedIn())
			{ 
			@Html.ActionLink("Login", "LogOn", "Account")
			}
			else 
			{             
			@Html.ActionLink("Log Out", "LogOut", "Account")
			}
		</div>        
	</header>    
	<div class="container_12">        
		<div class="grid_12" style="background-color:#D1B8B8;">
			<div class="grid_3" style="margin-top:20px;margin-bottom:20px;">
				<div style="background-color:#fff;height:300px;width:200px;margin-bottom:20px; border-radius: 5px;">
					
					@if (isLoggedIn())
					{ 
						<div>
							<div style="padding:10px;">
								@Html.Label("Place")
								@Html.TextBox("Place")
                                @Html.Hidden("PlaceId")
								@Html.Label("Beer")
								@Html.TextBox("Beer")
                                @Html.Hidden("BeerId")
								@Html.Label("Comment")
								@Html.TextArea("Comment")
								<input type="Button" value="Tap" id="Tap"/> 
							</div>
						</div>
					}


					<script language="javascript">
					    $().ready(function (a) {
					        $("#Place").autocomplete({
					            source: '@Url.Content("~/AutoComplete/Places")',
					            minLength: 2,
					            select: function (e, u) { $("#PlaceId").val(u.item.id); }
					        });

					        $("#Beer").autocomplete({
					            source: '@Url.Content("~/AutoComplete/Beers")',
					            minLength: 2,
					            select: function (e, u) { $("#BeerId").val(u.item.id); }
					        });

					        $("#Tap").bind("click", function (e) {
					            $.post('@Url.Content("~/Tap/Create")',
                                    {
                                        "placeId": $("#PlaceId").val(),
                                        "beerId": $("#BeerId").val(),
                                        "Comment": $("#Comment").val()
                                    },
                                    function (data) { alert(data); });
					        });
					    });
					</script>
				</div>                
				<div style="background-color:#fff;height:300px;width:200px;border-radius: 5px;">
				    
				</div>
			</div>
			<div class="grid_8">    
				<div style="background-color:#fff;border-radius: 5px;">
					@RenderBody()
				</div>
			</div>
		</div>        
	</div>    
</body>
</html>
